
Pre_Snapshots:
  groups: ["aci"]
  source:
    pkg: genie.libs.sdk
    class: triggers.blitz.blitz.Blitz
  test_sections:

    - pre_snapshot_Health:
        - sleep:
            sleep_time: 2
        - api:
            device: uut
            function: apic_rest_get
            arguments:
              dn: /api/class/healthInst.json
            save:
              - variable_name: pre_health

        - sleep:
            sleep_time: 2
        - api:
            device: uut
            function: save_dict_to_json_file
            arguments:
              data:
                - "%VARIABLES{pre_health}"
              filename: "pre_snapshots/pre-health.json"

    - Create_tenant:
        - api:
            device: uut
            function: apic_rest_post
            arguments:
              dn: "/api/node/mo/uni/tn-pyats-test.json"
              payload: |
                {
                  "fvTenant": {
                      "attributes": {
                        "dn": "uni/tn-pyats-test",
                        "status": "created,modified"
                      },
                      "children": []
                  }
                }
             


